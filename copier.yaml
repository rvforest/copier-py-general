# questions
project_name:
  type: str
  help: What is your project name?
  validator: >-
    {% if not (project_name | regex_search('^[a-z][a-z0-9\-]+$')) %}
    project_name must start with a letter, followed one or more letters, digits or dashes all lowercase.
    {% endif %}

package_name:
  type: str
  help: Name of the package, e.g. my_package (auto-generated)
  default: "{{ project_name.replace('-', '_') }}"
  when: false  # Hide from prompts, but available for templates

description:
  type: str
  help: Enter the project's description

user_name:
  type: str
  help: What is the author's name?
  default: "{{ environ.get('GIT_AUTHOR_NAME', '') }}"

user_email:
  type: str
  help: What is the author's email address?
  default: "{{ environ.get('GIT_AUTHOR_EMAIL', '') }}"

py_max_version:
  type: str
  help: What is the maximum Python version for this project? (e.g. 3.13)
  default: 3.13
  when: false  # Hide from prompts, but available for templates

py_min_version:
  type: str
  help: What is the minimum Python version for this project? (e.g. 3.9)
  default: 3.13

py_versions:
  type: yaml
  help: List of supported Python versions (auto-generated)
  default: |
    [{% for v in range(py_min_version|replace('.', '')|int, py_max_version|replace('.', '')|int + 1) %}"3.{{ '%d' % (v % 100) }}"{% if not loop.last %}, {% endif %}{% endfor %}]
  when: false  # Hide from prompts, but available for templates

has_cli:
  type: bool
  help: Does this package provide a CLI tool?
  default: false

cli_command:
  type: str
  help: What is the CLI command name?
  default: "{{ project_name }}"
  when: "{{ has_cli }}"

current_year:
  type: str
  help: Current year (auto-generated)
  default: "{{ now().strftime('%Y') }}"
  when: false  # Hide from prompts, but available for templates

_subdirectory: template

_exclude:
  - src/{{package_name}}/cli/**
  - "!src/{{package_name}}/cli/**"
  when: "not has_cli"

_tasks:
  # Create initial commit with only README so that dynamic version lookup succeeds
  # Don't commit other files so that developer can modify before adding to repo
  - when: "{{ _copier_operation == 'copy' }}"
    command: |
      git init --initial-branch=main
      git add README.md
      git commit -m "Initial commit"
